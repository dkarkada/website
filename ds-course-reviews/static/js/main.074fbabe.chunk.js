(this["webpackJsonpds-course-reviews"]=this["webpackJsonpds-course-reviews"]||[]).push([[0],{17:function(e,t,a){e.exports=a(28)},22:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(13),o=a.n(s),i=(a(22),a(16)),l=a(2),c=a.n(l),u=a(10),m=a(5),d=a(6),h=a(7),p=a(9),f=a(8),v=a(15),w=a(14),g=a.n(w),y=a(3);a(27);function E(e){var t=e.reviewer?n.a.createElement("p",null,n.a.createElement("b",null,"Reviewer: "),e.reviewer):null,a=e.misc?n.a.createElement("p",null,n.a.createElement("b",null,"Miscellaneous: "),e.misc):null;return n.a.createElement("div",{className:"review"},n.a.createElement("h2",null,e.coursenum," ",e.coursename," ",n.a.createElement("br",null),e.prof,", ",e.date),t,n.a.createElement("p",null,n.a.createElement("b",null,"Difficulty: "),e.difficulty),n.a.createElement("p",null,n.a.createElement("b",null,"Workload: "),e.workload),n.a.createElement("p",null,n.a.createElement("b",null,"Lectures: "),e.lecture),a)}function k(e){var t=e.toLowerCase().split(/\s+/);if(t.length>=2){var a=t[0],r=parseInt(t[1]);return isNaN(r)?0:"spring"==a?r+.1:"summer"==a?r+.2:"fall"==a?r+.3:r+.4}return 0}var b=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;Object(d.a)(this,a),r=t.call(this,e);var n,s=new Map,o=new Map,i=new Map,l=Object(m.a)(e.reviews);try{for(l.s();!(n=l.n()).done;){var c=n.value,u=c.dept;s.has(u)?s.get(u).push(c):s.set(u,[c]);var h=c.coursenum;o.has(h)?o.get(h).push(c):o.set(h,[c]);var p=c.prof;i.has(p)?i.get(p).push(c):i.set(p,[c])}}catch(f){l.e(f)}finally{l.f()}return r.allDeptNames=s,r.allCoursenums=o,r.allProfs=i,r.deptList=Array.from(r.allDeptNames.keys()).sort(),r.state={dept:"",course:"",prof:"",search:"",availProfs:Array.from(r.allProfs.keys()).sort(),availCourses:Array.from(r.allCoursenums.keys()).sort(),availReviews:r.props.reviews,numRevShown:20},r}return Object(h.a)(a,[{key:"deptChange",value:function(e){var t=this;this.setState({dept:e.target.value,course:"",prof:""}),this.setState((function(e){return t.updateReviews(e)}))}},{key:"courseChange",value:function(e){var t=this;if(""==this.state.dept){var a=this.allCoursenums.get(e.target.value)[0].dept;this.setState({dept:a,course:e.target.value})}else this.setState({course:e.target.value});this.setState((function(e){return t.updateReviews(e)}))}},{key:"profChange",value:function(e){var t=this;if(""==this.state.dept){var a=this.allProfs.get(e.target.value)[0].dept;this.setState({dept:a,prof:e.target.value})}else this.setState({prof:e.target.value});this.setState((function(e){return t.updateReviews(e)}))}},{key:"searchChange",value:function(e){var t=this;this.setState({search:e.target.value}),this.setState((function(e){return t.updateReviews(e)}))}},{key:"updateReviews",value:function(e){console.log("a");var t,a,r=this.props.reviews;return""==e.dept?(t=Array.from(this.allCoursenums.keys()).sort(),a=Array.from(this.allProfs.keys()).sort()):(t=(r=this.allDeptNames.get(e.dept)).filter((function(t){return""==e.prof||t.prof==e.prof})).map((function(e){return e.coursenum})),a=r.filter((function(t){return""==e.course||t.coursenum==e.course})).map((function(e){return e.prof})),t=Array.from(new Set(t)).sort(),a=Array.from(new Set(a)).sort()),{availCourses:t,availProfs:a,availReviews:r=r.filter((function(t){return(""==e.prof||t.prof==e.prof)&&(""==e.course||t.coursenum==e.course)&&(""==e.search||t.coursename.toLowerCase().includes(e.search))})),numRevShown:20}}},{key:"loadMoreReviews",value:function(){console.log("loading more"),this.state.numRevShown+20<this.state.availReviews.length?this.setState((function(e){return{numRevShown:e.numRevShown+20}})):this.setState((function(e){return{numRevShown:e.availReviews.length}}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"review-reader"},n.a.createElement("select",{className:"selector",value:this.state.dept,onChange:this.deptChange.bind(this)},n.a.createElement("option",{key:"",value:""}," [All departments] "),this.deptList.map((function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement("select",{className:"selector",value:this.state.course,onChange:this.courseChange.bind(this)},n.a.createElement("option",{key:"",value:""}," [All courses] "),this.state.availCourses.map((function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement("select",{className:"selector",value:this.state.prof,onChange:this.profChange.bind(this)},n.a.createElement("option",{key:"",value:""}," [All professors] "),this.state.availProfs.map((function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement("input",{className:"selector",type:"text",placeholder:"Course name search",onChange:this.searchChange.bind(this)}),n.a.createElement(g.a,{pageStart:0,loadMore:this.loadMoreReviews.bind(this),hasMore:this.state.availReviews.length!=this.state.numRevShown,loader:n.a.createElement("div",{className:"loader",key:0},"Loading ...")},this.state.availReviews.slice(0,this.state.numRevShown).map((function(e){return n.a.createElement(E,Object.assign({key:e.reviewID},e))}))))}}]),a}(n.a.Component),S=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;Object(d.a)(this,a),(r=t.call(this,e)).deptList=Array.from(new Set(e.reviews.map((function(e){return e.dept}))));var n,s=new Map,o=Object(m.a)(e.reviews);try{for(o.s();!(n=o.n()).done;){var i=n.value,l=i.dept;s.has(l)?(s.get(l).coursenums.add(i.coursenum),s.get(l).profs.add(i.prof),s.get(l).coursenames.add(i.coursename)):s.set(l,{coursenums:new Set([i.coursenum]),profs:new Set([i.prof]),coursenames:new Set([i.coursename])})}}catch(f){o.e(f)}finally{o.f()}r.deptMap=s,r.state={availCourses:Array.from(new Set(e.reviews.map((function(e){return e.coursenum})))),availProfs:Array.from(new Set(e.reviews.map((function(e){return e.prof})))),availCourseNames:Array.from(new Set(e.reviews.map((function(e){return e.coursename}))))};var c=new Date;r.dates=[];for(var u=c.getMonth()+1,h=c.getFullYear(),p=0;p<12;p++)u>8||u<2?(r.dates.push("Fall ".concat(h)),u=8):u>6?(r.dates.push("Summer ".concat(h)),u=6):(r.dates.push("Spring ".concat(h)),u=10,h-=1);return r}return Object(h.a)(a,[{key:"deptChange",value:function(e){var t=e.target.value;this.setState({availCourses:Array.from(this.deptMap.get(t).coursenums),availProfs:Array.from(this.deptMap.get(t).profs),availCourseNames:Array.from(this.deptMap.get(t).coursenames)})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"review-writer"},n.a.createElement("label",{for:"reviewerInp"},"Reviewer (optional): "),n.a.createElement("input",{className:"selector",id:"reviewerInp"}),n.a.createElement("label",{for:"deptSelect"},"Department: "),n.a.createElement("select",{id:"deptSelect",className:"selector",required:!0,onChange:this.deptChange.bind(this)},n.a.createElement("option",{disabled:!0,selected:!0}),this.deptList.map((function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement("label",{for:"courseSelect"},"Course number: "),n.a.createElement("input",{className:"selector",id:"courseSelect",required:!0,list:"coursenum"}),n.a.createElement("datalist",{id:"coursenum",style:{height:1}},this.state.availCourses.map((function(e){return n.a.createElement("option",{key:e,value:e})}))),n.a.createElement("label",{for:"coursenameInp"},"Course name: "),n.a.createElement("input",{className:"selector",id:"coursenameInp",required:!0,list:"coursename"}),n.a.createElement("datalist",{id:"coursename"},this.state.availCourseNames.map((function(e){return n.a.createElement("option",{key:e,value:e})}))),n.a.createElement("label",{for:"profSelect"},"Professor: "),n.a.createElement("input",{className:"selector",id:"profSelect",required:!0,list:"prof"}),n.a.createElement("datalist",{id:"prof"},this.state.availProfs.map((function(e){return n.a.createElement("option",{key:e,value:e})}))),n.a.createElement("label",{for:"dateSelect"},"Date taken: "),n.a.createElement("select",{id:"dateSelect",className:"selector",required:!0},this.dates.map((function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement("label",{for:"difficultyBox"},"Difficulty: "),n.a.createElement(y.a,{id:"difficultyBox",style:{width:"90%",resize:"none"},minRows:3,maxRows:15,placeholder:"How hard are the concepts/workload? Is it hard to get a good grade? Etc.",className:"selector"}),n.a.createElement("label",{for:"workloadBox"},"Workload: "),n.a.createElement(y.a,{id:"workloadBox",style:{width:"90%",resize:"none"},minRows:3,maxRows:15,placeholder:"What types of assignments are there? How many hours a week do they take? Etc.",className:"selector"}),n.a.createElement("label",{for:"lectureBox"},"Lectures: "),n.a.createElement(y.a,{id:"lectureBox",style:{width:"90%",resize:"none"},minRows:3,maxRows:15,placeholder:"How were lectures? Worth/required to go to class? Etc.",className:"selector"}),n.a.createElement("label",{for:"miscBox"},"Miscellaneous: "),n.a.createElement(y.a,{id:"miscBox",style:{width:"90%",resize:"none"},minRows:3,maxRows:15,className:"selector"}),n.a.createElement("button",{id:"submitButton",className:this.state.darkMode?"dark-mode":null,onClick:function(){return e.toggleReadMode()}},"Submit!"),n.a.createElement("div",{style:{"min-height":"20vh"}}))}}]),a}(n.a.Component),C=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),r=t.call(this,e),localStorage.getItem("theme")?"dark"==localStorage.getItem("theme")&&(!0,document.documentElement.setAttribute("data-theme","dark")):(!1,document.documentElement.setAttribute("data-theme","light")),r.state={isLoading:!0,readMode:!1,reviews:[],darkMode:!1},r}return Object(h.a)(a,[{key:"readData2",value:function(){var e=this;fetch("./reviews.json").then((function(e){return e.json()})).then((function(t){e.setState({reviews:t,isLoading:!1})}))}},{key:"readKey",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./api.config").then((function(e){return e.json()})).then((function(e){return e.key}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"readData",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readKey();case 2:t=e.sent,a="1AJO52gUTAElYGcfGMK07YkEfWdYNEITkjzS8hhOFTww",window.gapi.client.init({apiKey:t}).then((function(){var e="https://sheets.googleapis.com/v4/spreadsheets/".concat(a);return window.gapi.client.request({path:e,method:"GET",params:{key:t}})})).then((function(e){var n=e.result.sheets,s=Array.from(n,(function(e){return e.properties.title})),o=Array.from(n,(function(e){var r=e.properties.title,n="https://sheets.googleapis.com/v4/spreadsheets/".concat(a,"/values/").concat(r);return window.gapi.client.request({path:n,method:"GET",params:{key:t}})}));Promise.all(o).then((function(e){for(var t=[],a=0,n=0;n<e.length;n++){var o,l=e[n].result.values.slice(2),c=Object(m.a)(l);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(u.length<9){var d=9-u.length;u.push.apply(u,Object(i.a)(Array.from({length:d},(function(){return""}))))}var h={dept:s[n].trim(),coursenum:u[0].trim(),coursename:u[1].trim(),prof:u[2].trim(),date:u[3].trim(),difficulty:u[4].trim(),workload:u[5].trim(),lecture:u[6].trim(),misc:u[7].trim(),reviewer:u[8].trim(),reviewID:"rev".concat(a)};h.datenum=k(h.date),t.push(h),a+=1}}catch(p){c.e(p)}finally{c.f()}}t.sort((function(e,t){return t.datenum-e.datenum})),r.setState({reviews:t,isLoading:!1})}),(function(e){console.log(e)}))}),(function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.async=!0,t.onload=function(){window.gapi.load("client",(function(){e.readData2()}))},document.body.appendChild(t)}},{key:"toggleDarkMode",value:function(){this.setState((function(e){return e.darkMode?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-theme","dark")):(localStorage.setItem("theme","light"),document.documentElement.setAttribute("data-theme","light")),{darkMode:!e.darkMode}}))}},{key:"toggleReadMode",value:function(){this.setState((function(e){return{readMode:!e.readMode}}))}},{key:"render",value:function(){var e,t,a=this;return this.state.isLoading?n.a.createElement("center",{id:"loading"},n.a.createElement("h1",null,"Loading ...")):(this.state.readMode?(e=n.a.createElement(b,{reviews:this.state.reviews}),t="Submit a review!"):(e=n.a.createElement(S,{reviews:this.state.reviews}),t="Return to search"),n.a.createElement("div",{className:this.state.darkMode?"App dark-mode":"App"},n.a.createElement(v.a,{size:32,id:"darkmodeButton",className:this.state.darkMode?"dark-mode":null,onClick:function(){return a.toggleDarkMode()}}),n.a.createElement("div",{className:"column"},n.a.createElement("button",{id:"rwButton",className:this.state.darkMode?"dark-mode":null,onClick:function(){return a.toggleReadMode()}},t),e)))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.074fbabe.chunk.js.map